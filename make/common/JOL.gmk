JOL_VERSION=0.17

HEAPDUMP ?=

JAVA_HOME = $(opt)/java-21

jol_dir = $(opt)/jol-$(JOL_VERSION)
jol_jar = $(jol_dir)/jol-cli-$(JOL_VERSION)-full.jar
jol_url = https://repo.maven.apache.org/maven2/org/openjdk/jol/jol-cli/$(JOL_VERSION)/jol-cli-$(JOL_VERSION)-full.jar

heapdumpstats: $(jol_jar)
> $(JAVA_HOME)/bin/java -Xmx256m -jar $< heapdumpstats $(HEAPDUMP)
.PHONY: heapdumpstats

$(jol_jar):
> mkdir -p $(jol_dir)
> cd $(jol_dir)
> wget $(jol_url)
